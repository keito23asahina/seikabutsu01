{"filter":false,"title":"GymController.php","tooltip":"/badmintonreservation/app/Http/Controllers/Auth/GymController.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":40,"column":0},"action":"insert","lines":["<?php","","namespace App\\Http\\Controllers;","","use Illuminate\\Http\\Request;","use Google_Client;","use Google_Service_Places;","","class GymController extends Controller","{","    public function searchGyms(Request $request)","    {","        $term = $request->input('term'); // 入力された検索キーワード","        $municipalityId = $request->input('municipality_id'); // 選択された市区町村","","        $client = new Google_Client();","        $client->setApplicationName(\"YourAppName\");","        $client->setDeveloperKey(env('GOOGLE_PLACES_API_KEY'));","","        $service = new Google_Service_Places($client);","","        // APIリクエストの作成","        $query = \"{$municipalityId} 体育館 {$term}\";","        $results = $service->textSearch([","            'query' => $query,","            'language' => 'ja',","        ]);","","        $gyms = [];","        foreach ($results->getResults() as $place) {","            $gyms[] = [","                'name' => $place->name,","                'address' => $place->formatted_address,","                'place_id' => $place->place_id,","            ];","        }","","        return response()->json($gyms);","    }","}",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":40,"column":0},"end":{"row":40,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1728987786120,"hash":"16c225a4e8a19f4f536c732061c11027c2a896ae"}